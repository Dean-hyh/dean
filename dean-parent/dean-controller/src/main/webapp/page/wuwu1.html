<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cache-control" content="no-cache" />
    <title>Document</title>
    <style>
        input {
            width: 200px;
        }
    </style>
</head>

<body>
    <button id="btn1">查询</button>
    <div>
        <input type="text" id="tz">
        <button id="btn2">调增</button>
    </div>
    <div>
        <input type="text" id="tj1" placeholder="商户调减交易订单号"> <br>
        <input type="text" id="tj2" placeholder="交易描述"><br>
        <input type="text" id="tj3" placeholder="减扣梦想值"><br>
        <input type="text" id="tj4" placeholder="交易日期"><br>
        <input type="text" id="tj5" placeholder="交易时间：HHmmssSSS"><br>
        <button id="btn3">调减</button>
    </div>

    <div>
        <input type="text" id="cz">
        <button id="btn4">查证</button>
    </div>

    <script src="./jquery-3.2.1.js"></script>
    <script src="./msBridge-1.2.1.js"></script>
    <script src="./vsconsolelog.js"></script>
    <script>
        btn1.onclick = function () {
            Fw.thirdDreamValueQuery({_isThirdLogin: "cmbc_zx"},function(data){
                console.log('查询成功');
                //console.log(data);
            });

        };
        btn2.onclick = function () {
            var par = {
                taskId: document.getElementById('tz').value
            };
            comm(par,2);

        };
        btn3.onclick = function () {
            var par = {
                "dreamOrderNo": document.getElementById('tj1').value,
                "transDesc": document.getElementById('tj1').value,
                "dreamValue": document.getElementById('tj1').value,
                "transDate": document.getElementById('tj1').value,
                "transTime": document.getElementById('tj1').value
            };
            console.log(par);
            comm(par,3);

        };
        btn4.onclick = function () {
            var par = {
                dreamOrderNo: document.getElementById('cz').value
            };
            comm(par,4);

        };

        //===========================
        function comm(param,flag) {
            $.ajax({
                //请求方式
                type: "POST",
                //请求的媒体类型
                //contentType: "application/json",
                //请求地址
                url: "http://172.203.144.94:8082/testCtrl/encrypt",
                dataType: 'json',
                //jsonpCallback: 'demo',
                //数据，json字符串
                data: param,
                //请求成功
                success: function (result) {
                    if(flag == 2){
                        Fw.thirdDreamValueAdd({_isThirdLogin: "cmbc_zx",params:result},function(data){
                            console.log('调增成功');
                            console.log(data);
                        });
                    }else if(flag == 3){
                        Fw.thirdDreamValueSub({_isThirdLogin: "cmbc_zx",params:result},function(data){
                            console.log('调减成功');
                            console.log(data);
                        });
                    }else if(flag == 4){
                        Fw.thirdDreamValueSubStatus({_isThirdLogin: "cmbc_zx",params:result},function(data){
                            console.log('查证成功');
                            console.log(data);
                        });
                    }
                    
                },
                //请求失败，包含具体的错误信息
                error: function (e) {
                    console.log(e.status);
                    console.log(e.responseText);
                }
            });
        }
    </script>
</body>

</html>